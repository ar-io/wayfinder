<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR.IO WayFinder</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="popup.js"></script>
</head>
<body>
    <div id="aboutSection">
      <h2>About the ar:// protocol</h2>
      <p>
          WayFinder uses the <code>ar://</code> protocol.  This is a unique web address schema powered by the <a href="https://ar.io" target="_blank" id="arioLink">AR.IO Network</a> and used to access content stored on the Arweave Permaweb. By using this protocol, users can directly navigate to and interact with decentralized web pages and applications via their <a href="https://ar.io/arns" target="_blank" id="arioLink">ArNS Name</a> or Arweave transaction ID.
      </p>
    </div>
    <div id="gatewayAddressRegistrySection">
      <h2 id="gatewayListTitle" style="display:none;">Gateway Address Registry</h2>
      <div id="gatewayListHeader" style="display:none;">
        <span class="online-gateways">Online: <span id="onlineGatewayCount">0</span></span>
        <span class="total-gateways">Total: <span id="totalGatewayCount">0</span></span>
      </div>
      <ul id="gatewayList" style="display:none;"></ul>
      <button id="refreshGateways" style="display:none;">Refresh Status</button>
    </div>
    <h2 id="historyListTitle" style="display:none;">Usage History</h2>
    <ul id="historyList" style="display:none;"></ul>
    <h2 id="settingsListTitle" style="display:none;">Settings</h2>
    <ul id="settingsList" style="display:none;"></ul>
    <div id="settingsSection" style="display:none;">
      <div class="setting">
        <label for="themeToggle" title="Switch between light and dark themes.">Theme:</label>
        <select id="themeToggle">
            <option value="dark">Dark Mode</option>
            <option value="light">Light Mode</option>
        </select>
      </div>
      <div class="setting">
        <label for="routingToggle">Routing Method:</label>
        <select id="routingToggle">
            <option value="stakeRandom" title="Route to gateways based on a weighted list by stake.">Stake-weighted Random</option>
            <option value="highestStake" title="Route to the gateway with the highest stake.">Highest Stake</option>
            <option value="random" title="Route to a random gateway.">Random</option>
        </select>
      </div>
      <div class="setting">
        <label for="staticGateway">Static Gateway:</label>
        <input type="text" id="staticGateway" placeholder="e.g. https://ar-io.dev">
        <button id="saveStaticGateway">✔</button>
      </div>
      <div class="setting">
        <label for="garCacheURL">GAR Cache URL:</label>
        <input type="text" id="garCacheURL" placeholder="e.g. https://dev.arns.app/v1/contract/E-pRI1bokGWQBqHnbut9rsHSt9Ypbldos3bAtwg4JMc/gateways">
        <button id="saveGarCacheURL">✔</button>
      </div>
    </div>
    <button id="showGateways">Gateway Address Registry</button>
    <button id="showHistory">Usage History</button>
    <button id="showSettings">Settings</button>
    <div id="gatewayModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" tabindex="0" title="Close">&times;</span>
            <h2>Gateway Details</h2>
            <p><strong><a id="modal-gateway-url" href="#" target="_blank">url...</a></strong></p>
            <p><strong>Gateway Address:</strong> <a id="modal-gateway-address" href="#" target="_blank">shortened_address...</a></p>
            <p><strong>Stake:</strong> <span id="modal-stake">placeholder_stake_value</span></p>
            <p><strong>Network Status:</strong> <span id="modal-status">placeholder_status</span></p>
            <p><strong>Joined Since:</strong> <span id="modal-start">placeholder_start_date</span></p>
            <p><strong>Gateway Properties:</strong> <a id="modal-properties" href="#" target="_blank">shortened_properties...</a></p>
            <p id="modal-note">placeholder_note</p>
        </div>
    </div>
    <footer>
      <a href="https://discord.gg/zAZ8p9ARqC" target="_blank" id="discordLink">Discord</a>
      <a href="https://github.com/ar-io/wayfinder" target="_blank" id="githubLink">GitHub</a>
      <a href="https://viewblock.io/arweave/contract/E-pRI1bokGWQBqHnbut9rsHSt9Ypbldos3bAtwg4JMc" target="_blank" id="contractLink" title="SmartWeave Contract">Contract</a>
    </footer>
</body>
</html>